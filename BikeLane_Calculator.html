<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cycling Investment Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --primary: #2e8b57;
      --accent: #f4f4f4;
      --text: #333;
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: var(--accent);
      color: var(--text);
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 750px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    h2 {
      color: var(--primary);
      text-align: center;
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }
    input {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 1em;
    }
    button {
      width: 100%;
      padding: 12px;
      margin-top: 20px;
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 1em;
      cursor: pointer;
    }
    button:hover {
      background-color: #246b45;
    }
    table {
      width: 100%;
      max-width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      display: block;          /* allows horizontal scrolling */
      overflow-x: auto;
      white-space: nowrap;     /* prevents awkward breaks */
    }
    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: left;
      vertical-align: top;
      word-wrap: break-word;
      white-space: normal;     /* allows wrapping inside cells */
    }
    th {
      background-color: var(--primary);
      color: white;
    }
    .note {
      font-size: 0.9em;
      color: #555;
      margin-top: 10px;
    }
    .sup-btn {
      display: inline-block;
      font-size: 0.6em;
      line-height: 1;
      padding: 0 3px;
      margin: 0 0 0 2px;
      vertical-align: super;
      border: 1px solid #ccc;
      background: green;
      color: white;
      border-radius: 3px;
      cursor: default;
      width: auto;
      height: auto;
    }
    @media (max-width: 600px) {
      .container {
        padding: 15px;
      }
      h2 {
        font-size: 1.5em;
      }
      table, th, td {
        font-size: 0.9em;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>ðŸš´ Cycling Investment Calculator</h2>

    <label for="investment">Investment Amount ($):</label>
    <input type="number" id="investment" value="1500000">

    <label for="savings">Annual Savings per Cyclist ($):</label>
    <input type="number" id="savings" value="4000">

    <label for="years">Years (for partial calculation):</label>
    <input type="number" id="years" value="5">

    <button onclick="calculate()">Calculate</button>

    <div id="output"></div>
  </div>

  <script>
    function calculate() {
      const investment = parseFloat(document.getElementById('investment').value);
      const savings = parseFloat(document.getElementById('savings').value);
      const years = parseFloat(document.getElementById('years').value);

      const multiplier = 3; // Hardcoded health benefit multiplier
      const lifetimeYears = 20; // Hardcoded infrastructure lifetime

      const cyclistsFinancial = investment / (savings * years);
      const totalCyclistSavings = cyclistsFinancial * savings * years;
      const lifetimeHealthCostReduction = investment * multiplier;
      const annualHealthCostReduction = lifetimeHealthCostReduction / lifetimeYears;
      const periodHealthCostReduction = annualHealthCostReduction * years;
      const totalBenefit = totalCyclistSavings + periodHealthCostReduction;
      const lifetimeCyclistSavings = cyclistsFinancial * savings * lifetimeYears;
      const totalLifetimeBenefit = lifetimeCyclistSavings + lifetimeHealthCostReduction;

      document.getElementById('output').innerHTML = `
        <table>
          <tr>
            <th>Question</th>
            <th>Answer</th>
          </tr>
          <tr>
            <td>How many cyclists would Saint John need to return $${investment.toLocaleString()} in the form of personal savings to residents who are cyclists?</td>
            <td>
              If the city invested $${investment.toLocaleString()} and attracted ${Math.round(cyclistsFinancial)} regular cyclists, each saving $${savings.toLocaleString()} annually, the combined personal savings of those cyclists over ${years} years would be $${totalCyclistSavings.toLocaleString()}.
              <br><br>
              <em>Formula: INVESTMENT Ã· (SAVINGS Ã— YEARS) = ${investment} Ã· (${savings} Ã— ${years})</em>
            </td>
          </tr>
          <tr>
            <td>The highest quality studies indicate that for every $1 spent on bikelanes, $${multiplier} in health costs are reduced (over ${lifetimeYears} years).
              <button class="sup-btn">1</button>
              <br><br>
              How much would Provincial health care costs reduce over ${years} years?
            </td>
            <td>
              Over ${years} years, the initial investment of $${investment.toLocaleString()} is projected to reduce Provincial health care costs by approximately $${periodHealthCostReduction.toLocaleString()}, based on an annual saving of $${annualHealthCostReduction.toLocaleString()} and a total lifetime saving of $${lifetimeHealthCostReduction.toLocaleString()} over ${lifetimeYears} years.
              <br><br><em>Formula: LIFETIME = INVESTMENT Ã— MULTIPLIER; ANNUAL = LIFETIME Ã· LIFETIME_YEARS; PERIOD = ANNUAL Ã— YEARS</em>
            </td>
          </tr>
          <tr>
            <td>What is the total personal financial benefit to regular cyclists + reduction in Provincial health care spending (over ${years} years)?</td>
            <td>
              ðŸ“ˆ Total ${years}-year economic return: <strong>$${totalBenefit.toLocaleString()}</strong><br>
              <ul>
                <li>Personal financial benefit to regular cyclists (over ${years} years): $${totalCyclistSavings.toLocaleString()}</li>
                <li>Reduction in Provincial health care spending (over ${years} years): $${periodHealthCostReduction.toLocaleString()}</li>
              </ul>
              <br>
              <em>Formula: TOTAL = PERSONAL_BENEFIT + PROVINCIAL_HEALTH_CARE_REDUCTION = ${totalCyclistSavings.toLocaleString()} + ${periodHealthCostReduction.toLocaleString()}</em>
            </td>
          </tr>
          <tr>
            <td>What is the total personal financial benefit to regular cyclists + reduction in Provincial health care spending (over ${lifetimeYears} years)?</td>
            <td>
              ðŸ“ˆ Total ${lifetimeYears}-year economic return: <strong>$${totalLifetimeBenefit.toLocaleString()}</strong><br>
              <ul>
                <li><strong>Initial investment amount:</strong> $${investment.toLocaleString()}</li>
                <li>Personal financial benefit to regular cyclists (over ${lifetimeYears} years): $${lifetimeCyclistSavings.toLocaleString()}</li>
                <li>Reduction in Provincial health care spending (over ${lifetimeYears} years): $${lifetimeHealthCostReduction.toLocaleString()}</li>
              </ul>
              <br>
              <em>Formula: TOTAL_LIFETIME = PERSONAL_LIFETIME_BENEFIT + PROVINCIAL_LIFETIME_HEALTH_CARE_REDUCTION = ${lifetimeCyclistSavings.toLocaleString()} + ${lifetimeHealthCostReduction.toLocaleString()}</em>
            </td>
          </tr>
        </table>
      <p class="note">
          *Note<sup>1</sup>: The $${multiplier} figure is based on total health care savings over the assumed ${lifetimeYears}-year lifetime of the infrastructure, as reported in <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0246419" target="_blank">peerâ€‘reviewed studies</a>. The ${years}-year figure shown here is a proportional estimate for illustration.*
        </p>
      `;
    }
  </script>
</body>
</html>